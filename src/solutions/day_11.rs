use std::collections::HashMap;

pub fn main() {
    let input = "...........................#...................#...........................................................................................#
.................................#..................................................#.................#............#......#.................
.......................#..................#...............#............#..........................................................#.........
..........#........................................#........................#............#.....#..............#.........................#...
............................................................................................................................................
.....#..........#..............#.......#.......................................................................................#............
.................................................................#...................#..............................#.......................
............................................#..............#...............................................................#................
.........................#..................................................................#..............#................................
#..................#..............#.........................................................................................................
...................................................#.........................#........................................#....................#
.............#...........................#...............................................#..................................................
...........................#...........................#.......................................#............................................
......................#..............#..........................#...................................#..............................#........
........................................................................................................................................#...
...#................................................................................#.......................................................
.....................................................#....................#.................................#..............#................
..............................................#...................................................#..................#......................
.............#.............#...................................#.....................................................................#......
..................#......................................................................#...............#..................................
...........................................................................................................................................#
......................#.....................#......................................#.............................#.............#............
....#.............................................#.............................................#...........................................
............#....................#.............................................#............................................................
#.............................................................#.......#..................................................................#..
...........................#.............................................................#...............#..................................
......#..................................................#........................................#......................#......#...........
...................................................................#.................#...............................................#......
......................#.........#...........................................................................................................
...............................................................................................#............................#...............
........#.......#............................................................#...............................#........#....................#
............................................................................................................................................
....................................#.......................................................................................................
............................................#.........................#.....................................................................
.#...............................................#..........#....................................................................#..........
................................#.................................#......................................#........#.........................
...............#.........................#...........#.......................#.....#..............#....................#....................
............................................................................................................................................
.....#.................#......................................................................................#.............................
...............................................#...............#...........................................................................#
.................#..................#......................................#..............#..............................#..................
...........................................#........................#............................................#..........................
..#......................................................#......................................#...............................#.......#...
.......#............................................................................#.......................................................
...............................#..................#..........................................................#..............#...............
.....................#................................................#.....................................................................
...............#................................................#........................................#..................................
...................................#...................................................#....................................................
...........................................#..............................#..........................#...............#...............#......
..............................#.................................................................................#.............#.............
.........#.............#.................................#..................................................................................
......................................#..............................#.....................................#...............................#
.................................#..........................................................................................................
...............#...............................................................................#..................................#.........
..................................................................#......................................................#..................
#............................................#..........#...............#...........#.......................................................
.......................................................................................................#....................................
............................................................................................................................................
............................................................#..............#.....................#..........#.............................#.
......#.........................#..........................................................................................#................
............#...........#............................................................#......#........................#................#.....
........................................#............#..............#.......................................................................
...#........................................................................................................................................
............................................................................................................................................
................#................................#...............#......#...................................................................
............................................................................................................................................
............#.................#............#...............#................#..............................................................#
#.......................#............................................................................................................#......
..................................#.........................................................#..............................#................
......#..........................................................................................................................#..........
............................#.................#.......................#..................................#..................................
...............#....................................................................................................#.....................#.
............................................................................................................................................
.........#.............................#.........#................#........#........#.......................................................
...................#...............................................................................#........................................
.........................................................#.....................................................#............................
.#..........................................................................................#................................#..........#...
.............................................#......................#..................................................#....................
..........#..........................................................................#......................................................
...........................#......................................................................#.........................................
.................#........................................#.................................................................................
.........................................................................#..............#..........................#.................#......
.................................................................#....................................#.....................................
...#.................................#.......................................................................#..............#...............
............#.............#........................#........................................................................................
....................................................................#..........................#............................................
.............................................#....................................#.......................#.....#..............#............
.....................#............#..........................................#.............................................................#
............................................................................................................................................
..........#....................................................#........................#...................................#...............
#........................................................................#........................#.........................................
................................................#.........#..............................................#.....#......#..........#..........
..............#.....#.......................................................................................................................
..............................#.............................................#.......#........#.......#...................................#..
....................................................#.......................................................................................
.............................................................#..............................................................................
.....#........................................#........................................#.............................................#......
............................#...............................................................................................................
.......................#...............................#.................................................#..................................
...........#........................#........................................................#.............................#................
...........................................................#......#......#...........................#......................................
#......#..........#............................#.....................................#...................................................#..
..............................#................................................#...............................#............................
.....................................................................#......................................................................
........................................#...................................................................................................
.....................................................#..........#.......................................................#..................#
.......................#...................................................................#.................#................#.............
#...........................#..............#..............................#.................................................................
............................................................................................................................................
........................................................................................................#...................................
............#.....#...............#.....................#.........................................................#...................#.....
..............................................................#............................................................................#
.................................................#...................................#......#............................#..................
......................................................................................................#.....................................
...#.........................#.....................................#...........#................................................#...........
................#..............................................................................#.............#..............................
......................................#....................................#..............................................................#.
.........#...............................................#..................................................................................
.......................#........................#....................#......................#...............................#.....#.........
..........................................#............................................................................................#....
......#.....#.....................#..............................#.....................#....................................................
....................................................#.......................................................................................
.#......................................................................................................................#...................
..................#........#................#...............#.............................#.................................................
..........#........................................................................#..............#...........#.....#.......................
.....................................................................#......................................................................
...#.....................................#.....#...........................#..................#.............................................
............................................................................................................................................
.....................................#.................................................................#...................#.......#........
.......................#........................................#...................#.......................................................
.....#............#..........#..............................................................................................................
#.................................................................................................#.............#..............#............
.........#.......................#..........................................................................................................
..................................................................#........................................#................................
......................#..............................#.....#...........#....................................................................
...........................................#..........................................#...............................................#.....
...............................................................................................................#............................
.............................#..................#............................................#.......................#............#.........
................#..............................................................#.....................#......................................
.......#............................#...................#............#...................................................#.................."
.lines().into_iter().map(|s| s.chars().collect::<Vec<char>>()).collect::<Vec<Vec<char>>>();

    let mut locs: Vec<(usize, usize)> = Vec::new();
    for (row, l) in input.iter().enumerate() {
        for (col, c) in l.into_iter().enumerate() {
            if c == &'#' {
                locs.push((row, col));
            }
        }
    }

    let mut extra_rows_seen: HashMap<usize, usize> = HashMap::new();
    let mut extra_cols_seen: HashMap<usize, usize> = HashMap::new();
    let mut r_seen = 0;
    let mut c_seen = 0;

    for side_len in 0..input.len() {
        let empty_row = (0..input.len()).fold(true, |acc, col| acc && input[side_len][col] != '#');
        if empty_row {
            r_seen += 1;
        } else {
            extra_rows_seen.insert(side_len, r_seen);
        }
        let empty_col = (0..input.len()).fold(true, |acc, row| acc && input[row][side_len] != '#');
        if empty_col {
            c_seen += 1;
        } else {
            extra_cols_seen.insert(side_len, c_seen);
        }
    }

    let mut sol = 0;
    let mut sol2 = 0;
    for (idx, galaxy) in locs.iter().enumerate() {
        for nbr_idx in (idx + 1)..locs.len() {
            let neighbor = locs[nbr_idx];
            let r_min = galaxy.0.min(neighbor.0);
            let r_max = galaxy.0.max(neighbor.0);
            let c_min = galaxy.1.min(neighbor.1);
            let c_max = galaxy.1.max(neighbor.1);

            sol += r_min.abs_diff(r_max);
            sol += c_min.abs_diff(c_max);
            sol += extra_rows_seen.get(&r_max).unwrap_or(&0)
                - extra_rows_seen.get(&r_min).unwrap_or(&0);
            sol += extra_cols_seen.get(&c_max).unwrap_or(&0)
                - extra_cols_seen.get(&c_min).unwrap_or(&0);

            sol2 += r_min.abs_diff(r_max);
            sol2 += c_min.abs_diff(c_max);
            sol2 += (extra_rows_seen.get(&r_max).unwrap_or(&0)
                - extra_rows_seen.get(&r_min).unwrap_or(&0))
                * 999999;
            sol2 += (extra_cols_seen.get(&c_max).unwrap_or(&0)
                - extra_cols_seen.get(&c_min).unwrap_or(&0))
                * 999999;
        }
    }
    println!("part one: {sol}");
    println!("part two: {sol2}");
}
